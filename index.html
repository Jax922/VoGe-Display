<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="src/app.css">
  <style>
    body {
    margin: 0;
  }

  #stats {
    position: relative;
    width: 100%;
    height: 80px;
  }

  #main {
    position: relative;
    margin: 0;
  }

  #canvas-wrapper {
    position: relative;
  }

  .block-container {
    text-align: left;
  }

  #stats {
    display: none;
  }

  #output {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    object-fit: cover;
  }

  #gui{
    display: none;
  }
  </style>
  
</head>

<body>
  
  <div class="block-container">
    <div id="stats"></div>
  </div>
  <div id="main">
    
    <div id="chart-container">
    
    </div>
    <div class="c-container">
      <div class="canvas-wrapper" >
        <video id="video" playsinline style="
          -webkit-transform: scaleX(-1);
          transform: scaleX(-1);
          /* visibility: hidden; */
          width: 1280px;
          height: 720px;
          ">
        </video>
        <canvas id="output" ></canvas>
      </div>
    </div>
    <div class="timeline-container">
      <div class="timeline-content">
        <div class="timeline-nodes-container">
          <div class="timeline-nodes">
          </div>
        </div>
        <div class="timeline-script">

          <div class="timeline-script-content">
          </div>  

        </div>
      </div>
      <div class="timeline-bottom">
        <button type="button" class="btn btn-link" style="font-size: 20px; font-weight: bold;">
          <i class="bi bi-chevron-up timeline-less-info"></i>
          <i class="bi bi-chevron-down timeline-more-info"></i>
        </button>
      </div>
    </div>
    <div id="debug-info">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasLabel">DEBUG</h5>
        <!-- <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button> -->
      </div>
      <div class="debug-content">
        <div class="container text-left">
          <div class="row">
            <div class="col">
              <h6>Gesture Recognition</h6>
            </div>
          </div>
          <div class="row">
            <div class="col">
             Left Hand:
              <span id="debug-left-gesture">
                No hand
              </span>
            </div>
          </div>
          <div class="row">
            <div class="col">
              Right Hand:
              <span id="debug-right-gesture">
                No hand
              </span>
            </div>
          </div>
          
          
          <div id="speech-content">
            <h6>Speech Recognition</h6>
            <div id="speech"></div>
          </div>
        </div>
      </div>
    </div>
    <div id="control-area">
      <div class="logo">
        <img src="./src/logo.webp" width="40px" class="rounded mx-auto d-block" alt="..." />
        <span>
          <font style="color: #0056b3;">Vo</font><font style="color: #ff7f0e;">Ge</font>
        </span>
      </div>
      <div class="controls">
        <button title="Open/Close Timeline" id="timelineButton" data-status="off" class="btn rounded-circle icon-button">
          <!-- <i class="bi bi-info-circle"></i> -->
          <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="icon-svg" width="54px" height="54.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="gray" d="M138 573.8V450.2c48.2-12.1 84-55.8 84-107.7 0-51.9-35.8-95.6-84-107.7V68.1c0-14.9-12.1-27-27-27s-27 12.1-27 27v166.7C35.8 246.9 0 290.6 0 342.5c0 51.9 35.8 95.6 84 107.7v123.7c-48.2 12-84 55.7-84 107.6s35.8 95.6 84 107.7v166.7c0 14.9 12.1 27 27 27s27-12.1 27-27V789.2c48.2-12.1 84-55.8 84-107.7s-35.8-95.6-84-107.7zM60 342.5c0-28.1 22.9-51 51-51s51 22.9 51 51-22.9 51-51 51-51-22.9-51-51z m51 390c-28.1 0-51-22.9-51-51s22.9-51 51-51 51 22.9 51 51-22.9 51-51 51zM942 283H352c-16.6 0-30-13.4-30-30s13.4-30 30-30h590c16.6 0 30 13.4 30 30s-13.4 30-30 30zM771.4 457H347.6c-14.2 0-25.6-11.5-25.6-25.6v-8.7c0-14.2 11.5-25.6 25.6-25.6h423.7c14.2 0 25.6 11.5 25.6 25.6v8.7c0.1 14.1-11.4 25.6-25.5 25.6z"  /><path fill="gray" d="M942 625H352c-16.6 0-30-13.4-30-30s13.4-30 30-30h590c16.6 0 30 13.4 30 30s-13.4 30-30 30zM771.4 799H347.6c-14.2 0-25.6-11.5-25.6-25.6v-8.7c0-14.2 11.5-25.6 25.6-25.6h423.7c14.2 0 25.6 11.5 25.6 25.6v8.7c0.1 14.1-11.4 25.6-25.5 25.6z"  /></svg>
        </button>
        <button title="Open/Close Debug-Info" id="debugButton" data-status="off" class="btn rounded-circle icon-button">
          <i class="bi bi-bug" title="Open/Close Debug-Info"></i>
        </button>
        <button title="Start Recording" id="recordButton"data-status="off" class="btn rounded-circle icon-button">
            <i class="bi bi-play-circle" id="record-play"></i>
            <i class="bi bi-pause-circle" id="record-pause" style="display: none;"></i>
        </button>
        <div id="record-info" style="display: none;">
          Time: <span id="record-time">0</span> s
        </div>
        <button id="record-stop" class="btn rounded-circle icon-button" style="display: none;">
          <i class="bi bi-stop-circle" style="color: red;"></i>
        </button>
        <!-- <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked>
          <label class="form-check-label" for="flexSwitchCheckChecked">Debug</label>
        </div>
        <button type="button" class="btn btn-primary">Start Record</button> -->
      </div>
    </div>
  </div>

  <div id="countdown" class="countdown">

    10

  </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.6/dat.gui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/r16/Stats.min.js"></script>

<!-- this example uses TFJS 3.7.0 - older versions back to 2.1.0 are supported -->
<script src="https://unpkg.com/@tensorflow/tfjs-core@3.7.0/dist/tf-core.js"></script>

<!-- You must explicitly require a TF.js backend if you're not using the tfs union bundle. -->
<script src="https://unpkg.com/@tensorflow/tfjs-backend-webgl@3.7.0/dist/tf-backend-webgl.js"></script>

<!-- The main handpose dependencies -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/hand-pose-detection@2.0.0/dist/hand-pose-detection.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646424915/hands.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fingerpose@0.1.0/dist/fingerpose.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

<!-- <script src="src/fingerpose.js"></script> -->
<script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>

<script src="src/app.js"></script>

</html>
